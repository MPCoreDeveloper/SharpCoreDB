#!/usr/bin/env pwsh
# Fair Comparison Benchmark Launcher voor Windows
# Direct starten: druk gewoon op 1 in het menu!

Write-Host "????????????????????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "?        SharpCoreDB Fair Comparison Benchmark                         ?" -ForegroundColor Cyan
Write-Host "????????????????????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host ""

# Check if in correct directory
if (-not (Test-Path "SharpCoreDB.Benchmarks.csproj")) {
    Write-Host "? Error: Must run from SharpCoreDB.Benchmarks directory" -ForegroundColor Red
    Write-Host ""
    Write-Host "Run:" -ForegroundColor Yellow
    Write-Host "  cd SharpCoreDB.Benchmarks" -ForegroundColor Yellow
    Write-Host "  .\run-fair-comparison.ps1" -ForegroundColor Yellow
    exit 1
}

# Build in Release mode
Write-Host "?? Building in Release mode..." -ForegroundColor Yellow
dotnet build -c Release --nologo -v quiet

if ($LASTEXITCODE -ne 0) {
    Write-Host "? Build failed!" -ForegroundColor Red
    exit 1
}

Write-Host "? Build successful!" -ForegroundColor Green
Write-Host ""

# Run benchmark (interactive menu will show, just press 1)
Write-Host "?? Starting benchmark menu..." -ForegroundColor Yellow
Write-Host ""
Write-Host "?? Druk op '1' om de Fair Comparison te starten!" -ForegroundColor Cyan
Write-Host ""

dotnet run -c Release --no-build

Write-Host ""
Write-Host "????????????????????????????????????????????????????????????????????????" -ForegroundColor Cyan
Write-Host "?        Klaar!                                                        ?" -ForegroundColor Cyan
Write-Host "????????????????????????????????????????????????????????????????????????" -ForegroundColor Cyan
